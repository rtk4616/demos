<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="content-type" content="text/html;charset=utf-8"> 
   <title>(J)Ruby in Action - Web Apps & Services w/ Rails n Jetty</title>

<meta name="generator" content="Slide Show (S9) 2.3.1 on Ruby 1.9.2 (2011-07-09) [i386-mingw32]">
<meta name="author"    content="Your Name Here" >

<!-- helper/macro that lets you add (CSS3) gradient using headers
     see http://slideshow.rubyforge.org/themes.html
     
     -->

<!-- S6 style sheet links -->
<link rel="stylesheet" href="jruby_web_apps.css" media="projection" id="styleProjection">
<link rel="stylesheet" href="s6/screen.css"         media="screen"     id="styleScreen">
<link rel="stylesheet" href="s6/print.css"          media="print">

<!-- S6 JS -->
<script src="s6/jquery.js"></script>
<script src="s6/jquery.slideshow.js"></script>
<script>
  $(document).ready( function() {
    Slideshow.init();
  } );

  
</script>

<!-- Better Browser Banner for Microsoft Internet Explorer (IE) -->
<!--[if IE]>
<script src="s6/jquery.microsoft.js"></script>
<![endif]-->



</head>
<body>

<div class="layout"> 
  <div id="header"></div>
  <div id="footer">
    <h1>Your Footer Here</h1>
    <h2>Your Subfooter Here</h2>
  </div>
</div>

<div class="presentation">
   
<div class='slide '>
<!-- === begin markdown block ===

      generated by markdown 1.1.1 on Ruby 1.9.2 (2011-07-09) [i386-mingw32]
                on 2013-10-07 16:20:26 +0200 with Markdown engine kramdown (1.2.0)
                  using options {}
  -->


<!-- _S9SLIDE_ -->
<h1 id="ice-breakers">Ice Breakers</h1>

<ul>
  <li>
    <p>Friends of Ruby (Rails)? - Anyone?</p>
  </li>
  <li>
    <p>Friends of Functional Programming (Haskell, Yesod) - Anyone?</p>
  </li>
  <li>
    <p>Friends of Scala, Play! - Anyone?</p>
  </li>
  <li>
    <p>Friends of Server-Side JavaScript (Node.js) - Anyone?</p>
  </li>
  <li>
    <p>Friends of Dart - Anyone?</p>
  </li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="factories-factories-factories">Factories, Factories, Factories</h1>

<p>Java Enterprise Architecture </p>

<ul>
  <li>Factories, Factories, Factories</li>
  <li>Over-engineering, Cult of Complexity</li>
  <li>The COBOL of the 21st Century (Java is Old technology, No Longer Hot Java or the New New Thing =&gt; Innovation Happens Elsewhere)</li>
  <li>There is only Java, Java, Java - 1,000,0000,000 % Java, The End of History, Java Rules the World Hybris</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="why-ruby">Why Ruby?</h1>

<ul>
  <li>Code Blocks (Lambda Expressions) - 20 years in Ruby! Coming to Java 8 in 2014</li>
  <li>Open Classes</li>
  <li>Mixins</li>
  <li>Everything is a Object</li>
  <li>Meta Programming (e.g. Ruby Code Creates Code at Runtime on Demand)</li>
  <li>List, Tree, Map Data Structures in Ruby</li>
  <li>Templates in Ruby</li>
  <li>Culture - Programmer Happiness (Productivity, Keep it Simple), Innovation</li>
</ul>

<!--- finally -->

<ul>
  <li>Open, Free World (Not a Product and Trademark of Oracle, Inc.)</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="keep-it-simple---web-apps-case-study">Keep it Simple - Web Apps Case Study</h1>

<ol>
  <li>No Enterprise Java Application Server
    <ul>
      <li>Use Embedded Jetty Library to Run Container-Less </li>
    </ul>
  </li>
  <li>No Enterprise Java Database Server
    <ul>
      <li>Use Embedded SQLite Library</li>
    </ul>
  </li>
  <li>No Enterprise Java Application Framework
    <ul>
      <li>Use Embedded Ruby Library</li>
    </ul>
  </li>
  <li>No Enterprise Java IDE
    <ul>
      <li>Use Command Line, Programmer&#8217;s Editor</li>
    </ul>
  </li>
</ol>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="case-study-how-to-install-container-less-jetty-web-server">Case Study: How to Install Container-Less Jetty Web Server</h1>

<p>Step 1: Copy  <code>jetty-webapp-7.x.jar</code>  (~ 1 Meg)</p>

<p>Step 2: There is no step 2. </p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="think-different---whats-container-less">Think Different - What&#8217;s Container-Less?</h1>

<p><img src="i/jetty-container-less.png" alt="" /></p>

<p>Container-Less? Run your web application as a plain old Java process.</p>

<p>Why:</p>

<ul>
  <li>Simpler Development</li>
  <li>Simpler Testing</li>
  <li>Simpler Packaging</li>
  <li>Simpler Deployment</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="a-simple-web-app-using-jetty">A Simple Web App using Jetty</h1>

<p>The simplest possible Jetty server:</p>

<pre><code>import org.eclipse.jetty.server.Server;
    
public class SimpleServer
{
  public static void main(String[] args) throws Exception
  {
    Server server = new Server(8080);
    server.start();
    server.join();
  }
}
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="a-simple-web-app-using-jetty--cont">A Simple Web App using Jetty  (Cont.)</h1>

<pre><code>import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.webapp.WebAppContext;

public class AppServer
{

  public static void main(String[] args) throws Exception
  {
    Server server = new Server(8080);
 
    WebAppContext webapp = new WebAppContext();
    webapp.setContextPath("/");
    webapp.setWar( "./links.war");
    server.setHandler(webapp);
 
    server.start();
    server.join();
  }
}
</code></pre>

<h2 id="compile">Compile</h2>

<pre><code>javac -cp .;./jetty-webapp-7.x.jar AppServer.java
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="lets-build-a-link-bookmarking-and-voting-web-app">Let&#8217;s Build a Link Bookmarking and Voting Web App</h1>

<ul>
  <li>Post links</li>
  <li>Vote links up or down</li>
  <li>Sort links by the newest or hot</li>
</ul>

<p><img src="i/build-reddit-in-ruby.png" alt="" /></p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="create-a-web-app-using-ruby-on-rails">Create a Web App using Ruby on Rails</h1>

<h2 id="create-web-app-structure">Create Web App Structure</h2>

<pre><code>$ rails links
</code></pre>

<h2 id="create-sqlite-schema-dbmigratecreatedbrb">Create SQLite Schema (<code>db/migrate/create_db.rb</code>)</h2>

<pre><code>create_table :links do |t|
  t.string  :title,  :null =&gt; false 
  t.string  :url,    :null =&gt; false
  t.integer :points, :default =&gt; 0
  t.timestamps   # note: macro adds created_at, updated_at
end
</code></pre>

<h2 id="create-sqlite-db">Create SQLite DB</h2>

<pre><code>$ rake db:setup     # note: rake is ruby make (simple build tool)
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="model--view--controller-mvc">Model / View / Controller (MVC)</h1>

<h2 id="model-modelslinkrb">Model (<code>models/link.rb</code>)</h2>

<pre><code>class Link &lt; ActiveRecord::Base

  # self.table_name = 'links'
 
  attr_accessor :score 

  def recalc_score
    time_elapsed = (Time.now - self.created_at) / 36000  # in hours
    self.score = ((self.points-1) / (time_elapsed+2)**1.8)
  end
 
  def self.hot
    self.all.each { |rec| rec.recalc_score }.sort { |l,r| l.score &lt;=&gt; r.score }.reverse
  end
  
end
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="model--view--controller-mvc-1">Model / View / Controller (MVC)</h1>

<h2 id="controller-controllerslinkscontrollerrb">Controller (<code>controllers/links_controller.rb</code>)</h2>

<pre><code>class LinksController &lt; ApplicationController
  
  # GET /
  def index    
    @links = Link.order( 'created_at desc' ).all
  end

  # GET /hot
  def hot
    @links = Link.hot
    render :index
  end

  # POST /
  def create
    l = Link.new( params[:link] )
    l.save!
    redirect_to :back    
  end

  # PUT /:id/vote/:type
  def vote
    l = Link.find( params[:id] )
    l.points += params[:type].to_i
    l.save!
    redirect_to :back    
  end
  
end
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="model--view--controller-mvc-2">Model / View / Controller (MVC)</h1>

<h2 id="view-viewslinksindexhtmlerb">View (<code>views/links/index.html.erb</code>)</h2>

<pre><code>&lt;table id='links'&gt;
&lt;% @links.each do |l| %&gt;

&lt;tr&gt;
  &lt;td class='points'&gt;
    &lt;%= form_for l, :url =&gt; vote_link_path( l, :type =&gt; '1' ), :method =&gt; 'PUT' do |f| %&gt;
      &lt;%= f.submit '+1' %&gt;
    &lt;% end %&gt;
      
    &lt;%= l.points %&gt;

    &lt;%= form_for l, :url =&gt; vote_link_path( l, :type =&gt; '-1' ), :method =&gt; 'PUT' do |f| %&gt;
      &lt;%= f.submit '-1' %&gt;
    &lt;% end %&gt;            
  &lt;/td&gt;
  &lt;td&gt;&lt;span class='title'&gt;&lt;%= link_to l.title, l.url %&gt;&lt;/span&gt;
      &lt;span class='host'&gt;(&lt;%= l.url_host %&gt;)&lt;/span&gt;
      &lt;span class='created-at'&gt;posted &lt;%= time_ago_in_words(l.created_at) %&gt; ago&lt;/span&gt;
  &lt;/td&gt;
&lt;/tr&gt;
  
&lt;% end %&gt;
&lt;/table&gt;

&lt;div id='post-link'&gt;

  &lt;%= form_for :link, :url =&gt; links_path() do |f| %&gt;
    &lt;%= f.text_field :title, :placeholder =&gt; 'Title' %&gt;
    &lt;%= f.text_field :url,   :placeholder =&gt; 'URL' %&gt;
    &lt;%= f.submit 'Save Link' %&gt;
  &lt;% end %&gt;
  
&lt;/div&gt;
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="zip-up-and-run-it">Zip Up and Run It</h1>

<h2 id="zip-up-as-java-web-archive-linkswar">Zip Up as Java Web Archive (links.war)</h2>

<pre><code>$ rake war      # warble
</code></pre>

<h2 id="run-it">Run it</h2>

<pre><code>$ java -cp .;./jetty-webapp-7.x.jar AppServer
</code></pre>

<h2 id="surprise-">Surprise ??</h2>

<p>=&gt; One Plain Old Java Process - Embedded Jetty, Embedded SQLite, Embedded Ruby</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="case-study-how-to-install-embedded-ruby">Case Study: How to Install Embedded Ruby</h1>

<p>Step 1: Copy <code>jruby-complete-1.7.x.jar</code></p>

<p>Step 2: There is no step 2.</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="java-web-archive-war-directory-structure">Java Web Archive (<code>.war</code>) Directory Structure</h1>

<pre><code>links.war

|_ images
|  | _&lt;empty&gt;
|_ stylesheets
|  |_ application.css
|_ javascripts
|  | _&lt;empty&gt;
|_ WEB-INF
   |_ app
   |  |_ controllers
   |  |  |_ links_controller.rb
   |  |_ models
   |  |  |_ link.rb
   |  |_ views
   |     |_ layouts
   |     |  |_ application.html.erb
   |     |_ links
   |        |_ index.html.erb
   |_ config
   |  |_ database.yml
   |  |_ routes.rb
   |_ db
   |  |_ links.sqlite3
   |_ lib
      |_ jruby-complete-1.7.x.jar
      |_ jruby-rack-1.x.jar
      |_ gems.jar
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-missing-in-java-whats-wrong-with-java">What&#8217;s missing in Java? What&#8217;s wrong with Java?</h1>

<p>Anyone?</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="simple-data-structures-maps-arrays">Simple Data Structures (Maps, Arrays)</h1>

<p>Example:</p>

<pre><code>{ customer:
  { id: '12345',
    first_name: 'Carlos',
    last_name:  'Lafata',
    address:
    [
      { typ:      'home',
        line1:    'Burgring 11',
        city:     'Wien',
        zip_code: '1010' },
      { typ:      'work',
        line1:    'Nestroyplatz 12',
        city:     'Wien',
        zip_code: '1020' }
    ] }
}
</code></pre>

<h2 id="quiz--built-into-what-modern-languages">Quiz:  Built into what modern languages?</h2>

<p><code>[ X ]</code> JavaScript</p>

<p><code>[ X ]</code> Ruby</p>

<p><code>[ X ]</code> Scala</p>

<p><code>[  ]</code> ~~Java~~</p>

<p><code>[  ]</code> ~~COBOL~~</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="simple-code-blocks-higher-order-functions-functions-as-first-class-types">Simple Code Blocks (Higher Order Functions, Functions as First Class Types)</h1>

<p>Example:</p>

<pre><code>// Assign Function to Variable

var greet =  function() {  document.write( 'Welcome. Benvenuti. Willkommen.' ); }

// Call Function Stored in Variable

greet();

// Function as Function Parameter

function say( what )
{
  what();
  what();
  what();
}

// Pass Function Stored in Variable to Function

say( greet );
</code></pre>

<h2 id="quiz-built-into-what-modern-languages">Quiz: Built into what modern languages?</h2>

<p><code>[ X ]</code> JavaScript</p>

<p><code>[ X ]</code> Ruby</p>

<p><code>[ X ]</code> Scala</p>

<p><code>[  ]</code> ~~Java~~</p>

<p><code>[  ]</code> ~~COBOL~~</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="part-ii">Part II</h1>

<p>Building Web Services (HTTP APIs) with Ruby (and Sinatra)</p>

<h2 id="agenda">Agenda</h2>

<ul>
  <li>What&#8217;s Sinatra?</li>
  <li>Let a Thousand Sinatra Clones Bloom</li>
  <li>Why Sinatra? Goodies</li>
  <li>Example Web Service (HTTP API) - Routes</li>
  <li>Sinatra in Action - <code>get '/beer/:key'</code></li>
  <li>What&#8217;s JSON? </li>
  <li>What&#8217;s JSONP?</li>
  <li>Serializers - From Ruby Objects to JavaScript Objects</li>
  <li>Appendix: Sinatra Styles - Classic or Modern (Modular)</li>
  <li>Appendix: Database Connection Management</li>
  <li>Appendix: Sinatra Books</li>
  <li>Appendix: What&#8217;s Rack?</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-sinatra">What&#8217;s Sinatra?</h1>

<p>Simple (yet powerful and flexible) micro webframework.</p>

<pre><code>require 'sinatra'

get '/' do
  'Hallo Wien!'
end
</code></pre>

<p>Sinatra itself <a href="https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb">less than 2000 lines of code</a>.  </p>

<p>Installation. Type in your terminal (shell):</p>

<pre><code>$ gem install sinatra
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-sinatra-continued">What&#8217;s Sinatra? (Continued)</h1>

<p>Example - <code>hallo.rb</code>:</p>

<pre><code>require 'sinatra'

get '/' do
  'Hallo Wien!'
end
</code></pre>

<p>Run script (server):</p>

<pre><code>$ ruby hallo.rb

&gt;&gt; Sinatra has taken the stage...
&gt;&gt; Listening on 0.0.0.0:4567, CTRL+C to stop
</code></pre>

<p>Open browser:</p>

<p><img src="i/hallosinatra.png" alt="" /></p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="let-a-thousand-sinatra-clones-bloom">Let a Thousand Sinatra Clones Bloom</h1>

<p>Micro Frameworks Inspired by Sinatra</p>

<p>Express.js (in Server-Side JavaScript w/ Node.js):</p>

<pre><code>var express = require( 'express' );
var app = express();

app.get( '/', function( req, res ) {
  res.send( 'Hallo Wien!' );
});

app.listen( 4567 );
</code></pre>

<p>Scotty (in Haskell):</p>

<pre><code>import Web.Scotty

main :: IO ()
main = scotty 4567 $ do
    get "/" $ text "Hallo Wien!"
</code></pre>

<p>Dancer (Perl), Fitzgerald (PHP), Ratpack (Groovy),
Zappa (CoffeeScript), Mercury (Lua), Frank (F#), Nancy (C#/.NET),
Bogart (C), Flask (Python), and <a href="http://en.wikipedia.org/wiki/Sinatra_(software)#Frameworks_inspired_by_Sinatra">many more</a>.</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="why-sinatra--goodies">Why Sinatra?  Goodies</h1>

<p>1) Single file scripts</p>

<p>2) Easy to package up into a gem. Example:</p>

<pre><code>$ gem install beerdb     # Yes, the beerdb includes a Sinatra app.
</code></pre>

<p>3) Lets you build command line tools. Example:</p>

<pre><code>$ beerdb serve           # Startup web service (HTTP API).
</code></pre>

<p>4) Lets you mount app inside app (including Rails). Example:</p>

<pre><code>mount BeerDb::Server, :at =&gt; '/api/v1'
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="example-web-service-http-api---routes">Example Web Service (HTTP API) - Routes</h1>

<p>Lets build a beer and brewery API.</p>

<p>Get beer by key <code>/beer/:key</code>. Examples:</p>

<ul>
  <li><code>/beer/guinness</code></li>
  <li><code>/beer/murphysred</code></li>
  <li><code>/beer/brooklynlager</code></li>
  <li><code>/beer/ottakringerhelles</code></li>
</ul>

<p>Get brewery by key <code>/brewery/:key</code>. Examples:</p>

<ul>
  <li><code>/brewery/guinness</code></li>
  <li><code>/brewery/fullers</code></li>
  <li><code>/brewery/brooklyn</code></li>
  <li><code>/brewery/ottakringer</code></li>
</ul>

<p>Bonus:</p>

<p>Get random beer <code>/beer/rand</code> and random brewery <code>/brewery/rand</code>.</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="sinatra-in-action---get-beerkey">Sinatra in Action - <code>get '/beer/:key'</code></h1>

<p><code>beerdb/server.rb</code>:</p>

<pre><code>get '/beer/:key' do |key|

  beer = Beer.find_by_key!( key )
  json_or_jsonp( beer.as_json )

end

get '/brewery/:key' do |key|

  brewery = Brewery.find_by_key!( key )
  json_or_jsonp( brewery.as_json )

end
</code></pre>

<p>That&#8217;s it.</p>

<p>Bonus:</p>

<pre><code>get '/beer/:key' do |key|

  if ['r', 'rnd', 'rand', 'random'].include?( key )
    beer = Beer.rnd.first
  else
    beer = Beer.find_by_key!( key )
  end

  json_or_jsonp( beer.as_json )
end

get '/brewery/:key' do |key|

  if ['r', 'rnd', 'rand', 'random'].include?( key )
    brewery = Brewery.rnd.first
  else
    brewery = Brewery.find_by_key!( key )
  end

  json_or_jsonp( brewery.as_json )
end
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-json">What&#8217;s JSON?</h1>

<p>JSON = JavaScript Object Notation</p>

<p>Example - <code>GET /beer/ottakringerhelles</code>:</p>

<pre><code>{
  key: "ottakringerhelles",
  title: "Ottakringer Helles",
  synonyms: "16er Blech|16er Hüs'n",
  abv: "5.2",
  og: "11.8",
  tags: [ "lager" ],
  brewery: {
    key: "ottakringer",
    title: "Ottakringer Brauerei"
  },
  country: {
   key: "at",
   title: "Austria"
  }
}
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-jsonp">What&#8217;s JSONP?</h1>

<p>JSONP = JSON with Padding.  Why?</p>

<p>Call Home Restriction. Cross-Domain Browser Requests Get Blocked. </p>

<p>Hack: Wrap JSON into a JavaScript function/callback
e.g. <code>functionCallback( &lt;json_data_here&gt; )</code>
and serve as plain old JavaScript.</p>

<p>Example - <code>Content-Type: application/json</code>:</p>

<pre><code>{
  key: "ottakringerhelles",
  title: "Ottakringer Helles",
  synonyms: "16er Blech|16er Hüs'n",
  abv: "5.2",
  ...
}
</code></pre>

<p>becomes <code>Content-Type: application/javascript</code>:</p>

<pre><code>functionCallback(
  {
    key: "ottakringerhelles",
    title: "Ottakringer Helles",
    synonyms: "16er Blech|16er Hüs'n",
    abv: "5.2",
    ...
  }
);
</code></pre>

<p>Bonus: Little Sinatra helper for JSON or JSONP response (depending on callback parameter).</p>

<pre><code>def json_or_jsonp( json )
  callback = params.delete('callback')

  if callback
    content_type :js
    response = "#{callback}(#{json})"
  else
    content_type :json
    response = json
  end
end
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="serializers---from-ruby-objects-in-memory-to-javascript-object-in-text">Serializers - From Ruby Objects (in Memory) to JavaScript Object (in Text)</h1>

<p>JSON built into Ruby 2.0 as a standard library. Example:</p>

<pre><code>require 'json'

hash =
{
  key:   "ottakringerhelles",
  title: "Ottakringer Helles"
}
</code></pre>

<h3 id="jsongenerate">1) <code>JSON.generate</code></h3>

<pre><code>puts JSON.generate( hash )

&gt;&gt; {"key":"ottakringerhelles","title":"Ottakringer Helles"}
</code></pre>

<h3 id="tojson">2) <code>#to_json</code></h3>

<pre><code>puts hash.to_json

&gt;&gt;  {"key":"ottakringerhelles","title":"Ottakringer Helles"}
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="serializers---from-ruby-objects-in-memory-to-javascript-object-in-text-continued">Serializers - From Ruby Objects (in Memory) to JavaScript Object (in Text) Continued</h1>

<p>Serializers for your Models. Example:</p>

<pre><code>class BeerSerializer

  def initialize( beer )
    @beer = beer
  end

  attr_reader :beer

  def as_json
    data = { key:      beer.key,
             title:    beer.title,
             synonyms: beer.synonyms,
             abv:      beer.abv,
             ...
           }
    data.to_json
  end

end # class BeerSerializer
</code></pre>

<p>And add <code>as_json</code> to your Model. Example:</p>

<pre><code>class Beer &lt; ActiveRecord::Base

  def as_json_v2( opts={} )
    BeerSerializer.new( self ).as_json
  end

end # class Beer
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="appendix-whats-rack">Appendix: What&#8217;s Rack?</h1>

<p>Lets you mix &#8216;n&#8217; match servers and apps.</p>

<p>Lets you stack apps inside apps inside apps inside apps inside apps.</p>

<p>Good News: A Sinatra app is a Rack app.</p>

<p>Learn more about Rack @ <a href="http://rack.github.io"><code>rack.github.io</code></a>.</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="appendix-sinatra-books">Appendix: Sinatra Books</h1>

<p><img src="i/sinatra_up_and_running.gif" alt="" /> Sinatra: Up and Running by Alan Harris, Konstantin Haase;
November 2011, O&#8217;Reilly, 122 Pages</p>

<p><img src="i/jump_start_sinatra.gif" alt="" />  Jump Start Sinatra by Darren Jones;
January 2013, SitePoint, 150 Pages</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-viennarb-ruby-user-group-vienna">What&#8217;s vienna.rb? Ruby User Group Vienna</h1>

<p>Next meetup:  Fri, October 11th @ Sektor5 </p>

<p>Talks (*)</p>

<p>Jakob Sommerhuber - sponsor talk</p>

<p>Martin Schürrer - Erlang/OTP in production for highly-available, scalable systems</p>

<p>Markus Prinz - How to improve your code</p>

<p>Gerald Bauer - working with Sinatra</p>

<p>Kathrin Folkendt - &#8216;Chapter one&#8217; (lightning talk on getting started with Rails, and building her first web app)</p>

<p>(*) preliminary program</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="thats-it-thanks">That&#8217;s it. Thanks.</h1>

<p>1) Don&#8217;t put yourself in the Java ghetto (or Java rules the world hybris)</p>

<p>=&gt; Learn new concepts or languages </p>

<p>2) Web architecture is more than Java enterprise architecture</p>

<p>=&gt; Learn HTML, JS, CSS, HTTP (REST), SQL/NoSQL, etc.</p>

<h3 id="questions-comments">Questions? Comments?</h3>

<!-- === end markdown block === -->
</div>


</div><!-- presentation -->
</body>
</html>