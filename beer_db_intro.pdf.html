<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>beer.db - Using Open Beer & Brewery Data in Ruby</title>
   
   

<style>
html, body { margin: 0; padding: 0; }

body { font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; }

a:link, a:visited { color: black; }

h1 { font-size: 30pt;  }
h2 { font-size: 28pt;  }
h3 { font-size: 25pt;  }
p, li, dt, dd, td, th { font-size: 18pt; }

pre { font-size: 14pt;  }
pre.small { font-size: 11pt; }

pre.code {
        background-color: azure;
        padding: 5px;
      }
     
ul { list-style-type: square; }    
   
.center { text-align: center; }   
     
.slide { page-break-after: always;
         min-height: 100mm;
         padding: 40px;
         
         border: 1px dotted black;

/*      
  background: -moz-linear-gradient( top, maroon, red);
*/
       }


pre {
  padding: 4px 4px 4px 4px;
  border-top: #bbb 1px solid;
  border-bottom: #bbb 1px solid;
  background: #f3f3f3;
}



/*
for princexml (CSS3 paged media support)
@page { size: A4 landscape }
*/
</style>

</head>
<body>

<div class="presentation">

<div class='slide '>
<!-- === begin markdown block =====================================================

      generated by markdown 1.0.0 on Ruby 1.9.2 (2011-07-09) [i386-mingw32]
                on 2013-04-12 16:15:24 +0200 with Markdown engine redcarpet (2.1.1) w/ HTML render
                  using extensions: [no_intra_emphasis, fenced_code_blocks, tables, strikethrough]
  -->

<!-- _S9SLIDE_ -->
<h1><code>beer.db</code> - Using Open Beer &amp; Brewery Data in Ruby</h1>

<h3>Agenda</h3>

<ul>
<li>What&#39;s <code>beer.db</code>?</li>
<li>Example: Breweries - <code>breweries.txt</code></li>
<li>Example: Beers  - <code>beers.txt</code></li>
<li>How to use <code>beer.db</code> in Ruby</li>
<li>What&#39;s <code>world.db</code>?</li>
<li>How to use <code>beer.db</code> &amp; <code>world.db</code> in Ruby</li>
<li>How to use HTTP JSON API - <code>GET /beer/guinness</code></li>
<li>Design - Plain text format options</li>
<li>Design - Better comma separated values (CSV) format</li>
<li>Design - &quot;Magic&quot; - Use folder and file names for values and structure</li>
<li>Design - &quot;Magic&quot; - Use text patterns (regex) for fields</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>What&#39;s <code>beer.db</code>?</h1>

<p>A free open public domain beer database &amp; schema
for use in any (programming) language</p>

<p>(e.g. uses plain text fixtures/data sets)</p>

<pre><code>### Brewery

guinness, St. James&#39;s Gate Brewery / Guinness Brewery, 1759, D, city:dublin
</code></pre>

<pre><code>### Beer

Guinness|Guinness Draught, 4.2%, by:guinness, irish_dry_stout|dry_stout|stout
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Example: Breweries - <code>breweries.txt</code></h1>

<pre><code>##############################
# Wien

ottakringer, Ottakringer Brauerei, 1838, W, city:wien, »
    « 1160 Wien // Ottakringer Straße 91


###########################
# Niederösterreich

zwettler, Zwettler Brauerei, 1709, NÖ, city:zwettl, »
    « 3910 Zwettl // Syrnauer Straße 22-25

weitra,   Weitra Bräu Bierwerkstatt, 1321, NÖ, city:weitra, »
    « 3970 Weitra // Sparkasseplatz 160, zwettler
</code></pre>

<p>Source: <a href="https://github.com/geraldb/beer.db/blob/master/europe/at/breweries.txt"><code>europe/at/breweries.txt</code></a></p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Example: Beers  - <code>beers.txt</code></h1>

<pre><code>Ottakringer Helles,                  5.2 %, 11.8°, by:ottakringer
Ottakringer Gold Fassl Spezial,      5.6 %, 12.7°, by:ottakringer
Ottakringer (Gold Fassl) Pur,        5.2 %, 11.8°, by:ottakringer, bio
Ottakringer (Gold Fassl) Pils,       4.6 %, 11.2°, by:ottakringer
Ottakringer (Gold Fassl) Zwickl,     5.2 %, 12.2°, by:ottakringer

Zwettler Original,     5.1 %,  11.9°, by:zwettler
Zwettler Pils,         4.9 %,  11.5°, by:zwettler
Zwettler Zwickl,       5.5 %,  12.5°, by:zwettler
Zwettler Dunkles,      3.4 %,  11.5°, by:zwettler

Weitra Helles,  5.0 %,   11.8°,  by:weitra
Hadmar,         5.2 %,   12.5°,  by:weitra, bio
</code></pre>

<p>Source: <a href="https://github.com/geraldb/beer.db/blob/master/europe/at/beers.txt"><code>europe/at/beers.txt</code></a></p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>How to use <code>beer.db</code> in Ruby</h1>

<p>Brewery Model</p>

<pre><code>by = Brewery.find_by_key( &#39;guinness&#39; )

by.title
=&gt; &#39;St. James&#39;s Gate Brewery / Guinness Brewery&#39;

by.country.key
=&gt; &#39;ie&#39;

by.country.title
=&gt; &#39;Irland&#39;

by.city.title
=&gt; &#39;Dublin&#39;

by.beers.first
=&gt; &#39;Guinness&#39;, 4.2

...
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>How to use <code>beer.db</code> in Ruby (Cont.)</h1>

<p>Beer Model</p>

<pre><code>b = Beer.find_by_key( &#39;guinness&#39; )

b.title
=&gt; &#39;Guinness&#39;

b.abv
=&gt; 4.2

b.tags
=&gt; &#39;irish_dry_stout&#39;, &#39;dry_stout&#39;, &#39;stout&#39;

b.brewery.title
=&gt; &#39;St. James&#39;s Gate Brewery / Guinness Brewery&#39;

...
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>What&#39;s <code>world.db</code>?</h1>

<p>A free open public domain world database &amp; schema
for use in any (programming) language</p>

<p>(e.g. uses plain text fixtures/data sets)</p>

<pre><code>###  Countries

at, Austria, AUT, 83_871 km², 8_414_638, un|eu|euro|schengen|central_europe|western_europe
</code></pre>

<pre><code>###  Regions (States/Länder/Provinces)

w, Wien [Vienna], 415 km², eastern austria
</code></pre>

<pre><code>### Cities

Wien [Vienna],  W,  1_731_236, m:1_724_000
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>How to use <code>beer.db</code> &amp; <code>world.db</code> in Ruby</h1>

<p>Country Model</p>

<pre><code>at = Country.find_by_key( &#39;at&#39; )

at.title
=&gt; &#39;Austria&#39;

at.regions.count
=&gt; 9

at.beers
=&gt; &#39;Weitra Helles&#39;, &#39;Hadmar&#39;, &#39;Zwettler Original&#39;, ...

at.breweries
=&gt; &#39;Weitra Bräu Bierwerkstatt&#39;, &#39;Zwettler Brauerei&#39;, ...

...
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>How to use <code>beer.db</code> &amp; <code>world.db</code> in Ruby (Cont.)</h1>

<p>City Model</p>

<pre><code>wien = City.find_by_key( &#39;wien&#39; )

wien.title
=&gt; &#39;Wien&#39;

wien.beers
=&gt; &#39;Ottakringer Helles&#39;, &#39;Ottakringer (Gold Fassl) Zwickl&#39;, ...

wien.breweries
=&gt; &#39;Ottakringer Brauerei&#39;

...
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>How to use HTTP JSON API - <code>GET /beer/guinness</code></h1>

<p>Get beer by key <code>/beer/:key</code></p>

<pre><code>GET /beer/guinness

{
  &quot;beer&quot;:
  {
    &quot;key&quot;:&quot;guinness&quot;,
    &quot;title&quot;:&quot;Guinness&quot;,
    &quot;synonyms&quot;: &quot;Guinness Draught&quot;,
    &quot;abv&quot;:&quot;4.2&quot;,
    &quot;srm&quot;:null,
    &quot;og&quot;:null,
    &quot;tags&quot;:[&quot;irish_dry_stout&quot;,&quot;dry_stout&quot;,&quot;stout&quot;],
    &quot;brewery&quot;:
    {
      &quot;key&quot;: &quot;guinness&quot;,
      &quot;title&quot;: &quot;St. James&#39;s Gate Brewery / Guinness Brewery&quot;
    },
    &quot;country&quot;:
    {
      &quot;key&quot;:&quot;ie&quot;,
      &quot;title&quot;:&quot;Irland&quot;
    }
  }
}
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>How to use HTTP JSON API (Cont.) - <code>GET /brewery/guinness</code></h1>

<p>Get brewery by key <code>/brewery/:key</code></p>

<pre><code>GET /brewery/guinness

{
  &quot;brewery&quot;:
  {
    &quot;key&quot;: &quot;guinness&quot;,
    &quot;title&quot;: &quot;St. James&#39;s Gate Brewery / Guinness Brewery&quot;,
    &quot;synonyms&quot;: null,
    &quot;since&quot;: 1759,
    &quot;address&quot;: &quot;St. James&#39;s Gate // Dublin&quot;,
    &quot;tags&quot;: [&quot;diageo&quot;],
    &quot;beers&quot;:
    [
      {
        &quot;key&quot;: &quot;guinness&quot;,
        &quot;title&quot;: &quot;Guinness&quot;
      }
    ],
    &quot;country&quot;:
    {
      &quot;key&quot;: &quot;ie&quot;,
      &quot;title&quot;: &quot;Irland&quot;
    }
  }
}
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Design - Plain text format options</h1>

<ul>
<li>CSV (Comma Separated Values)</li>
<li>TSV (Tab Separated Values)</li>
<li>JSON (JavaScript Object Notation)</li>
<li>XML (eXtensible Markup Language)</li>
<li>YML (Yet Another Markup Language)</li>
<li>SQL (Structured Query Language)</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Design - Better comma separated values (CSV) format</h1>

<p>What&#39;s great with CSV?</p>

<ul>
<li>Simple plain text</li>
<li>One line, one record</li>
</ul>

<p>What&#39;s wrong with CSV?</p>

<ul>
<li>No comments</li>
<li>Escaping rules for quotes and commas ugly and not really simple</li>
<li>No optional fields</li>
<li>Fixed order of fields</li>
<li>No &quot;magic&quot; e.g.

<ul>
<li>No auto key generation from title field if leading key field missing (e.g. Guinness =&gt; <code>guinness</code>)</li>
<li>No autofill field values from folder names or file names

<ul>
<li>e.g. <code>europe/at</code> sets continent to <code>europe</code> and country to <code>at</code></li>
<li>e.g. <code>beers.2.txt</code> sets type/class to <code>beer</code> and grade to <code>2</code></li>
</ul></li>
</ul></li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Design -&quot;Magic&quot; - Use folder and file names for values and structure</h1>

<p>Do <strong>NOT</strong> put everything into a single file e.g. <code>beers.csv</code>. Better use folders
 and use folder and file names for adding some &quot;magic&quot; e.g. to autofill values
 e.g. set values for continent, country, city, district, etc. Example:</p>

<p><code>beer.db</code>:</p>

<pre><code>europe/
      at/
         beers.txt
         beers.2.txt
         breweries.txt
         breweries.2.txt
         ...
north-america/
              mx/
                beers.txt
                breweries.txt
                ...
pacific/
       au/
       ...
...
</code></pre>

<p>or</p>

<p><code>wien.db</code>:</p>

<pre><code>1-innere-stadt/
               brewpubs.txt
               cafes.txt
               cinemas.txt
2-leopoldstadt/
              ...
3-landstraße/
            ...

</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Design - &quot;Magic&quot; - Use text patterns (regex) for fields</h1>

<h3>Year brewery established</h3>

<p>e.g. 1759 or 1321</p>

<p>Always four digits =&gt; <code>/[0-9]{4}/</code></p>

<h3>Region (e.g. state/bundesland/etc.)</h3>

<p>e.g. TX =&gt; Texas, or  N =&gt; Niederösterreich</p>

<p>Always one or two uppercase letters  =&gt; <code>/[A-Z]{1,2}/</code></p>

<h3>Alcohol by volume (ABV)</h3>

<p>e.g. 5.4% =&gt; 5.4</p>

<p>Numbers ending with precent (%) =&gt; <code>/[0-9]+(\.[0-9]+)?%/</code></p>

<p>And many more text patterns in use.</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>That&#39;s it. Thank you.</h1>

<h3>Links</h3>

<ul>
<li><a href="https://github.com/geraldb/beer.db">github.com/geraldb/beer.db</a></li>
<li><a href="https://github.com/geraldb/football.db">github.com/geraldb/football.db</a></li>
<li><a href="https://github.com/geraldb/world.db">github.com/geraldb/world.db</a></li>
</ul>

<h3>Questions? Comments?</h3>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1>Bonus: Using CSV, JSON, YML &#39;n&#39; friends</h1>

<p>Use the HTTP API service and export your data in your format of choice.</p>
<!-- === end markdown block ===================================================== -->
</div>


  </div> <!-- presentation -->
</body>
</html> 

