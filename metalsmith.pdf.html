<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Building Static (Web) Sites w/ Metalsmith (Node.js)</title>
   
   

<style>
html, body { margin: 0; padding: 0; }

body { font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; }

a:link, a:visited { color: black; }

h1 { font-size: 30pt;  }
h2 { font-size: 28pt;  }
h3 { font-size: 25pt;  }
p, li, dt, dd, td, th { font-size: 18pt; }

pre { font-size: 14pt;  }
pre.small { font-size: 11pt; }

pre.code {
        background-color: azure;
        padding: 5px;
      }
     
ul { list-style-type: square; }    
   
.center { text-align: center; }   
     
.slide { page-break-after: always;
         min-height: 100mm;
         padding: 40px;
         
         border: 1px dotted black;

/*      
  background: -moz-linear-gradient( top, maroon, red);
*/
       }


pre {
  padding: 4px 4px 4px 4px;
  border-top: #bbb 1px solid;
  border-bottom: #bbb 1px solid;
  background: #f3f3f3;
}



/*
for princexml (CSS3 paged media support)
@page { size: A4 landscape }
*/
</style>

</head>
<body>

<div class="presentation">

<div class='slide '>
<!-- === begin markdown block ===

      generated by markdown/1.2.0 on Ruby 2.1.5 (2014-11-13) [i386-mingw32]
                on 2016-02-25 17:32:17 +0100 with Markdown engine kramdown (1.9.0)
                  using options {}
  -->


<!-- _S9SLIDE_ -->
<h1 id="agenda">Agenda</h1>

<ul>
  <li>What&#8217;s Metalsmith?</li>
  <li>Everything is a Plugin</li>
  <li>File / Directory Structure</li>
  <li>Real World Showcase -  Node.js Project Site</li>
  <li>More Plugins</li>
</ul>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="whats-metalsmith">What&#8217;s Metalsmith?</h1>

<p>A static site builder in JavaScript (Node.js).</p>

<p><img src="i/staticgen-metalsmith.png" alt="" /></p>

<p>See <a href="http://www.metalsmith.io"><code>metalsmith.io</code></a> »</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="metalsmith---everything-is-a-plugin">Metalsmith - Everything is a Plugin</h1>

<p>Configure file processing build pipeline / chain using plugins</p>

<p>Example - <code>build.js</code>:</p>

<pre><code>Metalsmith(_dirname)
  .source( 'src' )

  /*******************
    add plugins here
   ******************* /
 
  .destination( 'build' )
  .build( function(err) {
	        if (err) console.log(err);
  });
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="metalsmith---everything-is-a-plugin-cont">Metalsmith - Everything is a Plugin (Cont.)</h1>

<p>Example:</p>

<pre><code>  .use( metadata({
          links:  './data/links.json' }))
  .use( inPlace({
          engine: 'nunjucks',
          pattern: '**/*.html' }))
  .use( markdown() )
  .use( layouts({
          engine: 'nunjucks',
          directory: './layouts' }))
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="metalsmith---file--directory-structure">Metalsmith - File / Directory Structure</h1>

<pre><code>├── build.js                     # Metalsmith build script / configuration
├── layouts/
|   ├── default.html             # master layout template
|   ├── page.html                # - layout for pages
|   └── post.html                # - layout for blog posts
└─── src/
    ├── css/
    |   └── style.css           
    ├── data/
    |   └── links.json           # datafile (in json)
    ├── posts/
    |    ├── 2014-11-11-new-repo-maps.md
    |    ├── 2014-12-12-new-build-system.md
    |    └── 2015-08-25-new-season.md   
    ├── about.md                 # about page (in markdown e.g. md) 
    └── index.html               # front page (in hypertext e.g. html)
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="metalsmith---file--directory-structure----output">Metalsmith - File / Directory Structure  - Output</h1>

<p>Use:</p>

<pre><code>$ node build.js
</code></pre>

<p>Resulting in:</p>

<pre><code>└─── build/
     ├── css/
     |   └── style.css
     ├── posts/
     |    ├── 2014-11-11-new-repo-maps.html
     |    ├── 2014-12-12-new-build-system.html
     |    └── 2015-08-25-new-season.html
     ├── about.html
     └── index.html     
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="metalsmith---file--directory-structure----output-cont">Metalsmith - File / Directory Structure  - Output (Cont.)</h1>

<p><img src="i/staystatic-samplesite.png" alt="" /></p>

<p>(Source: Stay Static Sample Site Showcase - <code>index.html</code>)</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="real-world-showcase----nodejs-project-site">Real World Showcase -  Node.js Project Site</h1>

<p><img src="i/showcase-nodejs.png" alt="" /></p>

<p>See <a href="https://nodejs.org"><code>nodejs.org</code></a>
<a href="https://github.com/nodejs/nodejs.org">(Source)</a> »</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="real-world-showcase-1----nodejs-project-site-cont">Real World Showcase #1 -  Node.js Project Site (Cont.)</h1>

<p>Source - <a href="https://github.com/nodejs/nodejs.org/blob/master/build.js"><code>build.js</code></a>:</p>

<pre><code>const Metalsmith  = require('metalsmith')
const collections = require('metalsmith-collections')
const feed        = require('metalsmith-feed')
const layouts     = require('metalsmith-layouts')
const markdown    = require('metalsmith-markdown')
const prism       = require('metalsmith-prism')
const stylus      = require('metalsmith-stylus')
const permalinks  = require('metalsmith-permalinks')
const pagination  = require('metalsmith-yearly-pagination')

...

const metalsmith = Metalsmith(__dirname)
  metalsmith
    // Sets global metadata imported from the locale's respective site.json.
    .metadata({
      site: require(siteJSON),
      project: source.project,
      i18n: i18nJSON(locale)
    })
    // Sets the build source as the locale folder.
    .source(path.join(__dirname, 'locale', locale))
    // Defines the blog post/guide collections used to internally group them for
    // easier future handling and feed generation.
    .use(collections({
      blog: {
        pattern: 'blog/**/*.md',
        sortBy: 'date',
        reverse: true,
        refer: false
      },
      blogAnnounce: {
        pattern: 'blog/announcements/*.md',
        sortBy: 'date',
        reverse: true,
        refer: false
      },
      blogReleases: {
        pattern: 'blog/release/*.md',
        sortBy: 'date',
        reverse: true,
        refer: false
      },
      blogVulnerability: {
        pattern: 'blog/vulnerability/*.md',
        sortBy: 'date',
        reverse: true,
        refer: false
      },
      lastWeekly: {
        pattern: 'blog/weekly-updates/*.md',
        sortBy: 'date',
        reverse: true,
        refer: false,
        limit: 1
      },
      tscMinutes: {
        pattern: 'foundation/tsc/minutes/*.md',
        sortBy: 'date',
        reverse: true,
        refer: false
      },
      knowledgeBase: {
        pattern: 'knowledge/**/*.md',
        refer: false
      },
      guides: {
        pattern: 'docs/guides/!(index).md',
        refer: false
      }
    }))
    .use(pagination({
      path: 'blog/year',
      iteratee: (post, idx) =&gt; ({
        post,
        displaySummary: idx &lt; 10
      })
    }))
    .use(markdown(markedOptions))
    .use(githubLinks({ locale: locale }))
    .use(prism())
    // Deletes Stylus partials since they'll be included in the main CSS file
    // anyways.
    .use(filterStylusPartials())
    .use(stylus({
      compress: true,
      paths: [path.join(__dirname, 'layouts', 'css')],
      use: [autoprefixer()]
    }))
    // Set pretty permalinks, we don't want .html suffixes everywhere.
    .use(permalinks({
      relative: false
    }))
    // Generates the feed XML files from their respective collections which were
    // defined earlier on.
    .use(feed({
      collection: 'blog',
      destination: 'feed/blog.xml',
      title: 'Node.js Blog'
    }))
    .use(feed({
      collection: 'blogAnnounce',
      destination: 'feed/announce.xml',
      title: 'Node.js Announcements'
    }))
    .use(feed({
      collection: 'blogReleases',
      destination: 'feed/releases.xml',
      title: 'Node.js Blog: Releases'
    }))
    .use(feed({
      collection: 'blogVulnerability',
      destination: 'feed/vulnerability.xml',
      title: 'Node.js Blog: Vulnerability Reports'
    }))
    .use(feed({
      collection: 'tscMinutes',
      destination: 'feed/tsc-minutes.xml',
      title: 'Node.js Technical Steering Committee meetings'
    }))
    // Finally, this compiles the rest of the layouts present in ./layouts.
    // They're language-agnostic, but have to be regenerated for every locale
    // anyways.
    .use(layouts({
      engine: 'handlebars',
      pattern: '**/*.html',
      partials: 'layouts/partials',
      helpers: {
        copyright: require('./scripts/helpers/copyright-year.js'),
        equals: require('./scripts/helpers/equals.js'),
        startswith: require('./scripts/helpers/startswith.js'),
        i18n: require('./scripts/helpers/i18n.js'),
        changeloglink: require('./scripts/helpers/changeloglink.js'),
        strftime: require('./scripts/helpers/strftime.js'),
        apidocslink: require('./scripts/helpers/apidocslink.js'),
        majorapidocslink: require('./scripts/helpers/majorapidocslink.js'),
        summary: require('./scripts/helpers/summary.js')
      }
    }))
    // Pipes the generated files into their respective subdirectory in the build
    // directory.
    .destination(path.join(__dirname, 'build', locale))

  // This actually executes the build and stops the internal timer after
  // completion.
  metalsmith.build(function (err) {
    if (err) { throw err }
    console.timeEnd('[metalsmith] build/' + locale + ' finished')
  })
}
</code></pre>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="metalsmith---more-plugins">Metalsmith - More Plugins</h1>

<p><strong>metadata</strong> - Load metadata from JSON or YAML files.</p>

<p><strong>inPlace</strong> - In-place templating, render templates in your source files.</p>

<p><strong>markdown</strong> - Convert Markdown files to HTML.</p>

<p><strong>layouts</strong> - Apply layouts to your source files.</p>

<hr />

<p><strong>drafts</strong> - Hide any files marked as drafts.</p>

<p><strong>permalinks</strong>  - Apply custom permalinks and rename files to be nested properly for
static sites, basically converting about.html into about/index.html.</p>

<p><strong>collections</strong> - Group files together, like blog posts.
That way you can loop over them to generate an index, or add &#8216;next&#8217; and &#8216;previous&#8217;
links between them.</p>

<p><strong>feed</strong> - Generate an RSS feed for a collection.</p>

<p><strong>excerpts</strong> - Extract the first paragraph from the beginning of any HTML file.</p>

<p>And Many More</p>


</div>
<div class='slide '>
<!-- _S9SLIDE_ -->
<h1 id="links-links-links">Links, Links, Links</h1>

<p>Interested in Static (Web) Site Builders / Generators?</p>

<p>Follow the <a href="https://twitter.com/statictimes">Static Times News Channel</a>.</p>

<p>or</p>

<p>See the <a href="http://staystatic.github.io">Stay Static Showcase</a>.</p>

<p>Thanks.</p>

<!-- === end markdown block === -->
</div>


  </div> <!-- presentation -->
</body>
</html> 

